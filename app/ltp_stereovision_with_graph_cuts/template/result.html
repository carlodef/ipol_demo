<%include file="header.html" />

<p>
  The algorithm result is displayed hereafter.
  It ran in ${"%0.2f" % app.cfg['info']['run_time']}s.
</p>

<form action="${app.base_url}" method="get">
  <div class="action">
    Restart this algorithm with new input data.
    <input type="submit" value="new input" />
  </div> 
</form>

<form action="${app.base_url + 'wait'}" method="get">
  <div class="action">
    Restart this algorithm with other parameters.
    <input type="hidden" name="key" value="${app.key}" />
    <input type="hidden" name="newrun" value="1" />
    <label> K = ${k_prev} &#215;</label>
    <select name="K">
      %for _k in k_proposed:
      <option value="${_k}"
	      %if _k == "1":
	      selected="selected"
	      %endif
	      >${_k}</option>
      %endfor
    </select>
    <label> lambda = ${lambda_prev} &#215;</label>
    <select name="lambda">
      %for _l in l_proposed:
      <option value="${_l}"
	      %if _l == "1":
	      selected="selected"
	      %endif
	      >${_l}</option>
      %endfor
    </select>
    <input type="submit" value="run" />
  </div> 
</form>
<ul>
<li>If results look too noisy try increasing lambda.</li>
<li>If results look oversmoothed try decreasing lambda.</li>
<li>If there are too many occluded pixels try increasing K.</li>
</ul>

<h2>Result</h2>
<p>
K=${app.cfg['param']['k']}, lambda=${app.cfg['param']['lambda']}
</p>

<div class="gallery" style="height: ${height}px;">
  <ul class="index">
    <li>
      <a href="#">
	disparity map
	<span>
	  <img src="${app.work_url + 'output.png'}" alt="disparity map" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">
	rectified image 1
	<span>
	  <img src="${app.work_url + 'H_im0.png'}" alt="rectified image 1" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">
	rectified image 2
	<span>
	  <img src="${app.work_url + 'H_im1.png'}" alt="rectified image 2" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">
	input image 2
	<span>
	  <img src="${app.work_url + 'input_1.png'}" alt="input image 2" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">
	input image 1
	<span>
	  <img src="${app.work_url + 'input_0.png'}" alt="input image 1" />
	</span>
      </a>
    </li>
  </ul>
</div>

<hr />

<%include file="archive_info.html" />

<%include file="footer.html" />
