<%include file="header_ipol.html" />
<p>
  The algorithm ran in ${"%0.2f" % app.cfg['info']['run_time']} seconds. The
  selected ROI of the reference input image is displayed hereafter, as well as
  the generated height map (resampled on the reference image grid) and the
  generated 3D point cloud. These results may be best viewed with a desktop
  point cloud viewer (e.g.: CloudCompare, MeshLab...), as well as the 12 bits
  input images that are requantized to 8 bits for displaying on this web page.
</p>
<p>
Download all the results: <a href="${app.work_url + 's2p_results.zip'}">s2p_results.zip</a>
</p>

<form action="${app.base_url}" method="get">
  <div class="action">
    Restart this algorithm with new data.
    <input type="submit" value="new input" />
  </div>
</form>

<!--<form action="${app.base_url + 'params'}" method="get">
  <div class="action">
    Restart this algorithm with new parameters.
    <input type="hidden" name="key" value="${app.key}">
    <input type="hidden" name="newrun" value="1">
    <input type="submit" value="new parameters" />
  </div>
</form> -->


<h2>Input images and generated height map</h2>

<div class="gallery" style="height:${height}px">
  <ul class="index">
    <li>
      <a href="#">reference image
	<span>
	  <img src="${app.work_url + 's2p_results/roi_ref_preview.png'}" alt="input" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">secondary image
	<span>
	  <img src="${app.work_url + 's2p_results/roi_sec_preview.png'}" alt="input" />
	</span>
      </a>
    </li>
<!--    <li>
      <a href="#">input colorized
	<span>
	  <img src="${app.work_url + 's2p_results/roi_color_ref_preview.png'}" alt="input" />
	</span>
      </a>
      </li> -->
    <li>
      <a href="#">height map
	<span>
	  <img src="${app.work_url + 's2p_results/dem_preview.png'}" alt="output" />
	</span>
      </a>
    </li>
  </ul>
</div>

<h2>3D point cloud</h2>

<div id="content">
<canvas id="canvas" name="canvas" width="1000" height="800"></canvas><br>
    <span>status: </span><span class="orangeText" id="fileStatus">STREAMING</span><br>
    <input type="button" value="Zoom in" onclick="ipol_zoom_in();">
    <input type="button" value="Zoom out" onclick="ipol_zoom_out();">

    <script>
        <!--ipol_3d_start("../js/XB-PointStream-master/clouds/acorn.asc");-->
          ipol_3d_start("${app.work_url + 'cloud_ascii.ply'}");
      </script>
  </div>

      <br><br>

<%include file="archive_info.html" />

<%include file="credits_en.html" />
<%include file="logos.html" />
<%include file="footer.html" />
