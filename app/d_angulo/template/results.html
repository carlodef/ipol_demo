<%include file="header.html" />

<%
    def text2list(text):
       if text !='' and text[0] == '[':
          #  list= str(text).split() 
          list = eval(text)
       else:
          if text !='':
              list = [ text  ]
          else:
              list = []
       return list
       
    
    first_list_max_size = max(sizeY,8*30)
%>

<h2>Input parameters</h2>
<form action="${app.base_url + 'wait'}" method="get">
    <input type="hidden" name="key" value="${app.key}">
    
    <label for="shear_min">Horizontal shear range: [</label>
    <input type="text" name="shear_min" value="${str(app.cfg['param']['shear_min'])}" size="4" />
    <label for="shear_max"> , </label>
    <input type="text" name="shear_max" value="${str(app.cfg['param']['shear_max'])}" size="4" />
	], with 
    
    <label for="shear_nb"></label>
    <input type="text" name="shear_nb" value="${str(app.cfg['param']['shear_nb'])}" size="4" />
    quantized values.
    </br>
    
    <label for="tilt_min">Horizontal tilt range: [</label>
    <input type="text" name="tilt_min" value="${str(app.cfg['param']['tilt_min'])}" size="4" />
    <label for="tilt_max"> , </label>
    <input type="text" name="tilt_max" value="${str(app.cfg['param']['tilt_max'])}" size="4" />
	], with
    
    <label for="tilt_nb"></label>
    <input type="text" name="tilt_nb" value="${str(app.cfg['param']['tilt_nb'])}" size="4" />
    quantized values.
    </br>
    
    <label for="windowsize">Window size:</label>
    <input type="text" name="windowsize" value="${str(app.cfg['param']['windowsize'])}" size="4" />
    </br>
	
	<label for="min_disparity">Disparity range: [</label>
    <input type="text" name="min_disparity" value="${str(app.cfg['param']['min_disparity'])}" size="4" />
    <label for="max_disparity"> , </label>
    <input type="text" name="max_disparity" value="${str(app.cfg['param']['max_disparity'])}" size="4" />
	] pixels
	</br>
	
	<label for="subpixel">Subpixel:</label>
	<input type="radio" name="subpixel" value="1" checked >1 &nbsp;
	<input type="radio" name="subpixel" value="2">&frac12;&nbsp;
	<input type="radio" name="subpixel" value="4">&frac14;&nbsp;
	<input type="radio" name="subpixel" value="8">&frac18;&nbsp;
    </br>
	<p><input type="submit" value="Run with new parameters" /></p>
</form>
<form action="${app.base_url + 'index'}" method="get">
<input type="submit" value="Change images"/>
</form>
<br>
     

<p>
The algorithm result is displayed hereafter. It ran in ${"%0.2f" % app.cfg['info']['run_time']} seconds.
</p>



<h2>Results synthesis</h2>
<div class="gallery" style="height:${first_list_max_size}px;">
    <ul class="index">

     <li>
      <a href="#">
	Right image
	<span>
	  <table><tr><td style="vertical-align:top;">
	  <img src="${app.work_url + 'right_image.png'}" alt="" />
	  </td></tr></table>
	</span>
      </a>
     </li>
     
    <li>
      <a href="#">
	Left image
	<span>
	  <table><tr><td style="vertical-align:top;">
	  <img src="${app.work_url + 'left_image.png'}" alt="" />
	  </td></tr></table>
	</span>
      </a>
     </li>
     
     <li>
      <a href="#">
	Disparity (angulo)
	<span>
	  <table><tr>
	  <td style="vertical-align:top;">
	  <img style="background:url(${app.work_url + 'out_disp.png'})" 
	  		src="${app.work_url + 'out_filt.png'}" alt="" /><br>
	  </td></tr></table>
	</span>
      </a>
     </li>
     
    <li>
      <a href="#">
	Disparity (bm)
	<span>
	  <table><tr>
	  <td style="vertical-align:top;">
	  <img style="background:url(${app.work_url + 'disp_t1.00_s0.00.png'})" 
	  		src="${app.work_url + 'filt_t1.00_s0.00.png'}" alt="" /><br>
	  </td></tr></table>
	</span>
      </a>
     </li>
     
    <li>
      <a href="#">
	Left image
	<span>
	  <table><tr><td style="vertical-align:top;">
	  <img src="${app.work_url + 'left_image.png'}" alt="" />
	  </td></tr></table>
	</span>
      </a>
     </li>
     
     <li>
      <a href="#">
	Argmin
	<span>
	  <table><tr><td style="vertical-align:top;">
	   <img style="background:url(${app.work_url + 'out_argmin.png'})" 
	  		src="${app.work_url + 'out_filt.png'}" alt="" /><br>
	  Argmin
	  </td>
	  <td style="vertical-align:top;">
	   <img style="background:url(${app.work_url + 'out_cost.png'})" 
	  		src="${app.work_url + 'out_filt.png'}" alt="" /><br>
	 Minimal matching Cost
	  </td></tr></table>
	</span>
      </a>
     </li>     
    </ul>
</div>



<form action="${app.base_url + 'run'}" method="get">
<input type="hidden" name="key" value="${app.key}">
<input type="submit" value="Run Debug"/>
</form>

<p>
Download: <a href="${app.base_url}tmp/${app.key}/results.zip">results.zip</a>
</p>
<a name="p" href=#p></a>
<br><br>
<%include file="archive_info.html" />

<%include file="footer.html" />

