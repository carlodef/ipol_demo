<%include file="header.html" />

<p>
  The algorithm result is displayed hereafter.
  It ran in ${"%0.2f" % app.cfg['info']['run_time']}s.<br />
  You can run again this algorithm with new data.
</p>

<div class="action">
  Restart with new input data, different parameter or different subimage:
  <form style="display:inline;"
	action="${app.base_url}" method="get">
    <input type="submit" value="new input" />
  </form>
  %if x0 and y0 and x1 and y1:
    <form style="display:inline;"
	  action="${app.base_url + 'params'}" method="get">
      <input type="hidden" name="key" value="${app.key}">
      <input type="hidden" name="newrun" value="1">
      <input type="hidden" name="x0" value="${x0}">
      <input type="hidden" name="y0" value="${y0}">
      <input type="hidden" name="x1" value="${x1}">
      <input type="hidden" name="y1" value="${y1}">
      <input type="hidden" name="pattern" value="${pattern}">
      <input type="submit" value="different parameter" />
    </form>
    <form style="display:inline;"
	  action="${app.base_url + 'params'}" method="get">
      <input type="hidden" name="key" value="${app.key}">
      <input type="hidden" name="newrun" value="1">
      <input type="hidden" name="pattern" value="${pattern}">
      <input type="submit" value="different subimage" />
    </form>
  %else:
    <form style="display:inline;"
	  action="${app.base_url + 'params'}" method="get">
      <input type="hidden" name="key" value="${app.key}">
      <input type="hidden" name="newrun" value="1">
      <input type="hidden" name="pattern" value="${pattern}">
      <input type="submit" value="different parameter or subimage" />
    </form>
  %endif
</div>

<hr />

<h2>
Results 
(Mosaic pattern: 
  %if pattern == 'RGGB':
    RGGB <img src="${app.input_url + 'bayer_RGGB.png'}" />
  %endif
  %if pattern == 'GRBG':
    GRBG <img src="${app.input_url + 'bayer_GRBG.png'}" />
  %endif
  %if pattern == 'GBRG':
    GBRG <img src="${app.input_url + 'bayer_GBRG.png'}" />
  %endif
  %if pattern == 'BGGR':
    BGGR <img src="${app.input_url + 'bayer_BGGR.png'}" />
  %endif
) 
</h2>

<div class="gallery" style="height:${sizeY}px;">
  <ul class="index">
    <li>
      <a href="#">
	Mosaic
	<span>
	  <img src="${app.work_url + 'input_1.sel.png'}" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">
	Demosaic
	<span>
	  <img src="${app.work_url + 'output_1.png'}" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">
	Original
	<span>
	  <img src="${app.work_url + 'input_0.sel.png'}" />
	</span>
      </a>
    </li>
    <li>
      <a href="#">
	Difference
	<span>
	  <img src="${app.work_url + 'output_2.png'}" />
	</span>
      </a>
    </li>
  </ul>
</div>

<p>
The error range [-20,20] is linearly transformed to [0,255] for
visualization purposes. Errors outside this rang are saturated to 0
and 255 respectively
</p>

<hr />

<%include file="archive_info.html" />

<%include file="footer.html" />
